hostname R2

no ip domain-lookup

! ---------------------------------------------------------
! IPv4 and IPv6 addressing and routing
! ---------------------------------------------------------

int g0/0/0
    ip add 10.1.1.2 255.255.255.252 
    ipv6 address 2001:DB8:ACAD:1::2/64
    no shut

int g0/0/1
    ip add 10.2.2.2 255.255.255.252
    ipv6 address 2001:DB8:ACAD:2::2/64
    no shut

router ospf 1
    network 10.1.1.0 0.0.0.3 area 0
    network 10.2.2.0 0.0.0.3 area 0
    exit

! ---------------------------------------------------------
! Static routes for IPv6
! ---------------------------------------------------------

ipv6 route 2001:DB8:ACAD:A::/64 2001:DB8:ACAD:1::1
ipv6 route 2001:DB8:ACAD:C::/64 2001:DB8:ACAD:2::1

! ---------------------------------------------------------
! VERIFY CONFIGURATION:
! show ip ospf neighbor
! show ip route
! show ipv6 route
! ---------------------------------------------------------

! ---------------------------------------------------------
! ACL to restrict IPv6 traffic from LAN to only network 1
! ---------------------------------------------------------

ipv6 access-list PERMIT-IPV6-NET
    remark Permit traffic from network 1
    permit ipv6 2001:DB8:ACAD:1::/64 any
    remark Permit ICMPv6 for neighbor discovery
    permit icmp any any nd-na
    permit icmp any any nd-ns
    remark Deny all other traffic
    deny ipv6 any any log
    exit

interface g0/0/1
    ipv6 traffic-filter PERMIT-IPV6-NET out
    exit

! ---------------------------------------------------------
! VERIFY CONFIGURATION:
! show ipv6 access-lists
! show ipv6 interface g0/0/1
! ---------------------------------------------------------

! ---------------------------------------------------------
! SSH Configuration
! ---------------------------------------------------------

ip domain-name ccnasecurity.com

crypto key generate rsa general-keys modulus 2048

username admin privilege 15 secret Cisco12345

ip ssh version 2
ip ssh time-out 90
ip ssh authentication-retries 2

line vty 0 4
    transport input ssh
    login local
    exit

ip access-list standard SSH-ACCESS
    remark Permit SSH from connected networks
    permit 10.1.1.0 0.0.0.3
    permit 10.2.2.0 0.0.0.3
    deny any log
    exit

line vty 0 4
    access-class SSH-ACCESS in
    exit

! ---------------------------------------------------------
! VERIFY CONFIGURATION:
! show ip ssh
! show access-lists
! show ipv6 access-lists
! ---------------------------------------------------------